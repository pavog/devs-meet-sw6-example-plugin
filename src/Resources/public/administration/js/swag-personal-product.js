(this.webpackJsonp=this.webpackJsonp||[]).push([["swag-personal-product"],{"3DIY":function(t,s){t.exports='{% block personal_product_attributes %}\n    <div v-if="!isLoading" class="personal-product-canvas">\n        <sw-switch-field\n            label="Product can be customized"\n            v-model="isCustomizable">\n        </sw-switch-field>\n\n        <sw-container columns="2fr 1fr" v-if="isCustomizable">\n            <div class="media-canvas-outer">\n                <div class="media-canvas-inner">\n                    <img :src="product.media.first().media.url" class="cover">\n                    <canvas ref="canvas" class="canvas" @click="onClickCanvas"></canvas>\n                </div>\n            </div>\n\n            <div>\n                <sw-number-field\n                    label="Canvas X0"\n                    v-model="product.customFields.personal_product_canvasX0">\n                </sw-number-field>\n\n                <sw-number-field\n                    label="Canvas Y0"\n                    v-model="product.customFields.personal_product_canvasY0">\n                </sw-number-field>\n\n                <sw-number-field\n                    label="Canvas X1"\n                    v-model="product.customFields.personal_product_canvasX1">\n                </sw-number-field>\n\n                <sw-number-field\n                    label="Canvas Y1"\n                    v-model="product.customFields.personal_product_canvasY1">\n                </sw-number-field>\n\n                <sw-button @click="onClickReset" variant="primary">\n                    Reset\n                </sw-button>\n            </div>\n        </sw-container>\n\n\n\n\n    </div>\n{% endblock %}\n'},NdYI:function(t,s,e){"use strict";e.r(s);var n=e("fczV"),a=e.n(n);const{mapState:o,mapGetters:c}=Shopware.Component.getComponentHelper(),{get:i}=Shopware.Utils;Shopware.Component.register("personal-product-attributes",{template:a.a,data:()=>({attributes:{}}),computed:{...o("swProductDetail",["product"]),...c("swProductDetail",["isLoading"])},created(){this.createdComponent()},methods:{createdComponent(){}}});var r=e("3DIY"),d=e.n(r);e("Rc1T");const{mapState:l,mapGetters:u}=Shopware.Component.getComponentHelper(),{get:p}=Shopware.Utils;Shopware.Component.register("personal-product-canvas",{template:d.a,data:()=>({setPosKey:0}),computed:{...l("swProductDetail",["product"]),...u("swProductDetail",["isLoading"]),isCustomizable:{get(){return this.product.customFields.personal_product_customizable||!1},set(t){this.$set(this.product.customFields,"personal_product_customizable",t)}}},methods:{setCustomField(t,s,e){this.$set(this.product.customFields,`personal_product_canvasX${e}`,t),this.$set(this.product.customFields,`personal_product_canvasY${e}`,s)},onClickCanvas(t){const s=this.product.media.first().media.metaData;this.$refs.canvas.width=s.width,this.$refs.canvas.height=s.height;const e=this.$refs.canvas.getBoundingClientRect(),n=t.clientX-e.left,a=t.clientY-e.top,o=this.$refs.canvas.offsetWidth,c=this.$refs.canvas.offsetHeight,i=this.$refs.canvas.width/o,r=this.$refs.canvas.height/c;this.setPosition(n*i,a*r)},setPosition(t,s){this.setCustomField(Math.ceil(t),Math.ceil(s),this.setPosKey),this.setPosKey=+!this.setPosKey,this.updateCanvasRect()},updateCanvasRect(){const t=this.$refs.canvas.getContext("2d");t.clearRect(0,0,this.$refs.canvas.width,this.$refs.canvas.height),t.fillStyle="rgba(69,55,194,0.4)",t.fillRect(this.product.customFields.personal_product_canvasX0,this.product.customFields.personal_product_canvasY0,this.product.customFields.personal_product_canvasX1-this.product.customFields.personal_product_canvasX0,this.product.customFields.personal_product_canvasY1-this.product.customFields.personal_product_canvasY0)},onClickReset(){this.setCustomField(0,0,0),this.setCustomField(0,0,1),this.updateCanvasRect()}}});var m=e("aNGP"),v=e.n(m);const{Component:h}=Shopware;h.override("sw-product-detail-base",{template:v.a})},Rc1T:function(t,s,e){var n=e("eQgN");"string"==typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);(0,e("SZ7m").default)("47cd94e4",n,!0,{})},aNGP:function(t,s){t.exports='{#{% block sw_product_detail_attribute_sets %}#}\n{% block sw_product_detail_base_basic_info_card %}\n    <sw-card title="Product customizer attributes">\n        <personal-product-canvas></personal-product-canvas>\n    </sw-card>\n\n    <sw-card title="Product customizer attributes">\n        <personal-product-attributes>\n\n        </personal-product-attributes>\n    </sw-card>\n\n    {% parent() %}\n{% endblock %}\n'},eQgN:function(t,s,e){},fczV:function(t,s){t.exports='{% block personal_product_attributes %}\n    <div v-if="!isLoading">\n        <sw-switch-field\n            label="Product can be customized"\n            v-model="product.customFields.personal_product_customizable">\n        </sw-switch-field>\n        <sw-container columns="1fr 1fr" gap="0 20px" v-if="product.customFields.personal_product_customizable">\n            <sw-number-field\n                label="Canvas X"\n                v-model="product.customFields.personal_product_canvasX">\n            </sw-number-field>\n\n            <sw-number-field\n                label="Canvas Y"\n                v-model="product.customFields.personal_product_canvasY">\n            </sw-number-field>\n\n            <sw-number-field\n                label="Canvas width"\n                v-model="product.customFields.personal_product_canvasWidth">\n            </sw-number-field>\n\n            <sw-number-field\n                label="Canvas height"\n                v-model="product.customFields.personal_product_canvasHeight">\n            </sw-number-field>\n        </sw-container>\n    </div>\n{% endblock %}\n'}},[["NdYI","runtime","vendors-node"]]]);