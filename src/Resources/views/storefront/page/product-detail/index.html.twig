{% sw_extends '@Storefront/page/product-detail/index.html.twig' %}

{% block page_product_detail_media %}
    {% set customFields = page.product.customFields %}
    {% if customFields.personal_product_customizable %}
        <div style="width: 512px;"
            data-personal-product-viewer
             data-personal-product-viewer-options='
             {
                "x0":{{ customFields.personal_product_canvasX0 }},
                "y0":{{ customFields.personal_product_canvasY0 }},
                "x1":{{ customFields.personal_product_canvasX1 }},
                "y1":{{ customFields.personal_product_canvasY1 }},
                "baseImage":"{{page.product.media.first().media.url}}"
             }'>
            <canvas style="width: 100%; height: 100%"
                    data-personal-overlay
                    width="{{ page.product.media.first().media.metaData.width }}"
                    height="{{ page.product.media.first().media.metaData.height }}">
            </canvas>
        </div>
    {% else %}
        {{ parent() }}
    {% endif %}
{% endblock %}
